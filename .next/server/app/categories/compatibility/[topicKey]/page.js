(()=>{var e={};e.id=987,e.ids=[987],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5229:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(9773),s(1506),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),o=s(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["categories",{children:["compatibility",{children:["[topicKey]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9773)),"C:\\Users\\ASUS\\Desktop\\소울버스 프로젝트\\soulverse_refactored_clean\\app\\categories\\compatibility\\[topicKey]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"C:\\Users\\ASUS\\Desktop\\소울버스 프로젝트\\soulverse_refactored_clean\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\ASUS\\Desktop\\소울버스 프로젝트\\soulverse_refactored_clean\\app\\categories\\compatibility\\[topicKey]\\page.tsx"],p="/categories/compatibility/[topicKey]/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/categories/compatibility/[topicKey]/page",pathname:"/categories/compatibility/[topicKey]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1589:(e,t,s)=>{Promise.resolve().then(s.bind(s,7971))},440:()=>{},6637:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},7971:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(326),a=s(7577);function i(e,t,s,r){let a=Number(e);return Number.isNaN(a)?r:Math.max(t,Math.min(s,a))}let n={compatibility_basic:"기본 궁합 리포트",red_line:"레드 라인 궁합 분석",lucky_color:"행운 컬러 & 무드"};function o({params:e}){let{topicKey:t}=e,[s,o]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[d,p]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[u,h]=(0,a.useState)(""),[b,g]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[j,_]=(0,a.useState)(""),[v,N]=(0,a.useState)(!1),[S,w]=(0,a.useState)(null),[P,A]=(0,a.useState)(null),U=(0,a.useMemo)(()=>n[t]??"궁합 분석",[t]),k=(0,a.useMemo)(()=>!!(s&&l&&d&&m),[s,l,d,m]);async function C(e){if(e.preventDefault(),k&&!v){N(!0),A(null),w(null);try{let e={topic:t,man_birth:s,woman_birth:l,man_mbti:d.toUpperCase(),woman_mbti:m.toUpperCase(),man_blood:u.trim().toUpperCase()||void 0,woman_blood:b.trim().toUpperCase()||void 0,man_time:f.trim()||void 0,woman_time:j.trim()||void 0},r=await fetch("/api/compat",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.text().catch(()=>"");throw Error(e||`API ${r.status} 오류가 발생했습니다.`)}let a=await r.json();if(a.error)throw Error(a.detail||"AI 분석 중 오류가 발생했습니다.");let n=i(a.score,30,98,80),o=function(e){let t={정서:80,소통:80,현실:70,성장:90,지속:80};return e?{정서:i(e["정서"],0,100,t["정서"]),소통:i(e["소통"],0,100,t["소통"]),현실:i(e["현실"],0,100,t["현실"]),성장:i(e["성장"],0,100,t["성장"]),지속:i(e["지속"],0,100,t["지속"])}:t}(a.facets);w({...a,score:n,facets:o})}catch(e){console.error(e),A(e?.message??"알 수 없는 오류가 발생했습니다.")}finally{N(!1)}}}return r.jsx("div",{className:"min-h-screen bg-bg text-txt p-4",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto py-8 space-y-6",children:[(0,r.jsxs)("header",{className:"space-y-2 text-center",children:[r.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-muted",children:"SOULVERSE \xb7 COMPAT"}),r.jsx("h1",{className:"text-3xl font-bold",children:U}),r.jsx("p",{className:"text-sm text-muted",children:"사주 \xb7 MBTI \xb7 혈액형을 조합해 두 사람의 관계를 현실적으로 분석합니다."})]}),r.jsx("section",{className:"bg-card border border-borderc rounded-2xl p-6 shadow-deep",children:r.jsx("form",{onSubmit:C,className:"space-y-6",children:r.jsx("button",{type:"submit",disabled:v||!k,className:"w-full mt-2 inline-flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-semibold bg-accent text-bg shadow-[0_0_25px_rgba(125,211,252,0.5)] hover:bg-neon hover:shadow-[0_0_40px_rgba(96,165,250,0.7)] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:v?"분석 중...":"AI 궁합 리포트 받기"})})}),S&&!P&&(0,r.jsxs)("section",{className:"bg-card border border-borderc rounded-2xl p-6 shadow-deep space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-full border-2 border-accent flex items-center justify-center bg-bg shadow-[0_0_25px_rgba(125,211,252,0.4)]",children:r.jsx("span",{className:"text-2xl font-bold",children:i(S.score,30,98,80)})}),(0,r.jsxs)("div",{className:"flex-1 text-left",children:[r.jsx("h2",{className:"text-lg font-semibold mb-1",children:S.oneliner||"두 사람의 관계에는 함께 성장할 여지가 충분합니다."}),r.jsx("p",{className:"text-sm text-muted",children:S.summary||"서로의 기질과 현실적인 상황을 함께 고려해 관계를 안정적으로 만듭니다."})]})]}),r.jsx("div",{className:"h-px bg-borderc/50 my-6"}),r.jsx("h2",{className:"text-xl font-bold text-center",children:"5가지 관계 분석 요소"}),r.jsx("p",{className:"text-sm text-muted text-center -mt-4",children:"정서, 소통, 현실, 성장, 지속 가능성 점수입니다."}),S.facets&&r.jsx("div",{className:"space-y-4",children:Object.entries(S.facets).map(([e,t])=>(0,r.jsxs)("div",{className:"space-y-2 p-3 bg-bg/50 border border-borderc/50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-baseline",children:[r.jsx("span",{className:"font-semibold text-txt",children:e}),r.jsx("span",{className:"text-lg font-bold text-accent",children:t})]}),r.jsx("div",{className:"w-full h-3 rounded-full bg-borderc/60 overflow-hidden",children:r.jsx("div",{className:"h-full bg-accent transition-all duration-700 ease-out",style:{width:`${Math.min(100,Math.max(0,t))}%`}})}),S?.explanation?.[e]?r.jsx("p",{className:"text-xs text-muted pt-1",children:S?.explanation?.[e]??""}):null]},e))}),S.insights&&S.insights.length>0&&(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-xl font-bold text-center",children:"\uD83D\uDCA1 관계를 위한 실전 인사이트"}),r.jsx("ul",{className:"space-y-3 p-4 bg-bg/50 border border-borderc/50 rounded-lg",children:S.insights.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-start gap-2 text-sm text-txt",children:[r.jsx("span",{className:"text-accent flex-shrink-0 mt-0.5",children:"⚡"}),e]},t))})]})]})]})})}},9773:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var r=s(8570);let a=(0,r.createProxy)(String.raw`C:\Users\ASUS\Desktop\소울버스 프로젝트\soulverse_refactored_clean\app\categories\compatibility\[topicKey]\page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,r.createProxy)(String.raw`C:\Users\ASUS\Desktop\소울버스 프로젝트\soulverse_refactored_clean\app\categories\compatibility\[topicKey]\page.tsx#default`)},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>a});var r=s(9510);s(7272);let a={title:"SOULVERSE - AI 운명 분석 리포트",description:"AI가 분석하는 사주, MBTI, 혈액형 종합 운명 리포트"};function i({children:e}){return r.jsx("html",{lang:"ko",children:r.jsx("body",{children:r.jsx("main",{className:"min-h-screen bg-bg text-txt",children:e})})})}},7272:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,471],()=>s(5229));module.exports=r})();