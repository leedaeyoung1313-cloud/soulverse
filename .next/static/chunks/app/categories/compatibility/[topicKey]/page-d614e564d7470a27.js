(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{5014:function(e,s,t){Promise.resolve().then(t.bind(t,8186))},8186:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var l=t(7437),a=t(2265);function r(e,s,t,l){let a=Number(e);return Number.isNaN(a)?l:Math.max(s,Math.min(t,a))}let n={compatibility_basic:"기본 궁합 리포트",red_line:"레드 라인 궁합 분석",lucky_color:"행운 컬러 & 무드"},d=["ISTJ","ISFJ","INFJ","INTJ","ISTP","ISFP","INFP","INTP","ESTP","ESFP","ENFP","ENTP","ESTJ","ESFJ","ENFJ","ENTJ"],c=["A","B","O","AB"],o=Array.from({length:24},(e,s)=>String(s).padStart(2,"0")),i=["00","05","10","15","20","25","30","35","40","45","50","55"];function x(e){var s,t;let{params:x}=e,{topicKey:m}=x,[u,b]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[g,j]=(0,a.useState)(""),[v,N]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[_,k]=(0,a.useState)(""),[E,I]=(0,a.useState)(""),[C,T]=(0,a.useState)(""),[P,A]=(0,a.useState)(""),[J,F]=(0,a.useState)(!1),[M,O]=(0,a.useState)(null),[B,D]=(0,a.useState)(null),L=(0,a.useMemo)(()=>{var e;return null!==(e=n[m])&&void 0!==e?e:"궁합 분석"},[m]),R=h&&g?"".concat(h,":").concat(g):void 0,U=_&&E?"".concat(_,":").concat(E):void 0,V=(0,a.useMemo)(()=>!!(u&&w&&v&&C),[u,w,v,C]);async function q(e){if(e.preventDefault(),V&&!J){F(!0),D(null),O(null);try{let e=await fetch("/api/compat",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({topic:m,man_birth:u,woman_birth:w,man_mbti:v,woman_mbti:C,man_blood:f||void 0,woman_blood:P||void 0,man_time:R,woman_time:U})});if(!e.ok)throw Error("API ".concat(e.status," 오류"));let s=await e.json();if(s.error)throw Error(s.detail||"AI 분석 중 오류 발생");O({...s,score:r(s.score,30,98,80),facets:function(e){let s={정서:80,소통:80,현실:70,성장:90,지속:80};return e?{정서:r(e["정서"],0,100,s["정서"]),소통:r(e["소통"],0,100,s["소통"]),현실:r(e["현실"],0,100,s["현실"]),성장:r(e["성장"],0,100,s["성장"]),지속:r(e["지속"],0,100,s["지속"])}:s}(s.facets)})}catch(e){D(e.message||"오류가 발생했습니다.")}finally{F(!1)}}}return(0,l.jsx)("div",{className:"min-h-screen bg-bg text-txt p-4",children:(0,l.jsxs)("div",{className:"max-w-2xl mx-auto py-8 space-y-6",children:[(0,l.jsxs)("header",{className:"text-center space-y-2",children:[(0,l.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-muted",children:"SOULVERSE \xb7 COMPAT"}),(0,l.jsx)("h1",{className:"text-3xl font-bold",children:L}),(0,l.jsx)("p",{className:"text-sm text-muted",children:"사주팔자 \xb7 MBTI \xb7 혈액형을 선택해 궁합을 분석합니다."})]}),(0,l.jsx)("section",{className:"bg-card border border-borderc rounded-2xl p-6 shadow-deep",children:(0,l.jsxs)("form",{onSubmit:q,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("h2",{className:"text-sm font-semibold",children:"남자"}),(0,l.jsx)("label",{className:"block text-xs text-muted",children:"생년월일"}),(0,l.jsx)("input",{type:"date",value:u,onChange:e=>b(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm"}),(0,l.jsx)("label",{className:"block text-xs text-muted",children:"태어난 시간 (선택)"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm",children:[(0,l.jsx)("option",{value:"",children:"시 선택"}),o.map(e=>(0,l.jsxs)("option",{value:e,children:[e,"시"]},e))]}),(0,l.jsxs)("select",{value:g,onChange:e=>j(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm",children:[(0,l.jsx)("option",{value:"",children:"분 선택"}),i.map(e=>(0,l.jsxs)("option",{value:e,children:[e,"분"]},e))]})]}),(0,l.jsx)("label",{className:"block text-xs text-muted",children:"MBTI"}),(0,l.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm",children:[(0,l.jsx)("option",{value:"",children:"선택"}),d.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),(0,l.jsx)("label",{className:"block text-xs text-muted",children:"혈액형 (선택)"}),(0,l.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm",children:[(0,l.jsx)("option",{value:"",children:"선택"}),c.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("h2",{className:"text-sm font-semibold",children:"여자"}),(0,l.jsx)("label",{className:"block text-xs text-muted",children:"생년월일"}),(0,l.jsx)("input",{type:"date",value:w,onChange:e=>S(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm"}),(0,l.jsx)("label",{className:"block text-xs text-muted",children:"태어난 시간 (선택)"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,l.jsxs)("select",{value:_,onChange:e=>k(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm",children:[(0,l.jsx)("option",{value:"",children:"시 선택"}),o.map(e=>(0,l.jsxs)("option",{value:e,children:[e,"시"]},e))]}),(0,l.jsxs)("select",{value:E,onChange:e=>I(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm",children:[(0,l.jsx)("option",{value:"",children:"분 선택"}),i.map(e=>(0,l.jsxs)("option",{value:e,children:[e,"분"]},e))]})]}),(0,l.jsx)("label",{className:"block text-xs text-muted",children:"MBTI"}),(0,l.jsxs)("select",{value:C,onChange:e=>T(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm",children:[(0,l.jsx)("option",{value:"",children:"선택"}),d.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),(0,l.jsx)("label",{className:"block text-xs text-muted",children:"혈액형 (선택)"}),(0,l.jsxs)("select",{value:P,onChange:e=>A(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm",children:[(0,l.jsx)("option",{value:"",children:"선택"}),c.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]})]}),B&&(0,l.jsx)("p",{className:"text-xs text-red-400",children:B}),(0,l.jsx)("button",{type:"submit",disabled:J||!V,className:"w-full mt-2 bg-accent text-bg font-semibold rounded-xl px-4 py-3 hover:bg-neon transition-all disabled:opacity-50 relative",children:J?(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,l.jsx)("div",{className:"w-4 h-4 border-2 border-bg border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("span",{children:"AI 분석 중..."})]}):"AI 궁합 리포트 받기"})]})}),M&&!B&&(0,l.jsxs)("section",{className:"bg-card border border-borderc rounded-2xl p-6 shadow-deep space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-20 h-20 flex items-center justify-center border-2 border-accent rounded-full bg-bg shadow-[0_0_25px_rgba(125,211,252,0.4)] animate-pulse",children:(0,l.jsx)("span",{className:"text-2xl font-bold",children:r(M.score,30,98,80)})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-1",children:null!==(s=M.oneliner)&&void 0!==s?s:"함께 성장할 관계입니다."}),(0,l.jsx)("p",{className:"text-sm text-muted",children:null!==(t=M.summary)&&void 0!==t?t:"두 사람의 기질과 현실을 고려해 관계를 조화롭게 만드세요."})]})]}),(0,l.jsx)("div",{className:"h-px bg-borderc/50 my-6"}),(0,l.jsx)("h3",{className:"text-xl font-bold text-center",children:"5가지 관계 분석 요소"}),(0,l.jsx)("p",{className:"text-sm text-muted text-center",children:"정서, 소통, 현실, 성장, 지속성 점수입니다."}),M.facets&&(0,l.jsx)("div",{className:"space-y-4",children:Object.entries(M.facets).map(e=>{var s,t,a;let[r,n]=e;return(0,l.jsxs)("div",{className:"p-3 bg-bg/50 border border-borderc/50 rounded-lg space-y-1 transition-all hover:bg-bg/70",children:[(0,l.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,l.jsx)("span",{children:r}),(0,l.jsx)("span",{className:"font-semibold text-accent",children:n})]}),(0,l.jsx)("div",{className:"h-2 w-full bg-borderc/60 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-accent transition-all duration-700",style:{width:"".concat(n,"%")}})}),(null===(s=M.explanation)||void 0===s?void 0:s[r])&&(0,l.jsx)("p",{className:"text-xs text-muted pt-1",children:null!==(a=null===(t=M.explanation)||void 0===t?void 0:t[r])&&void 0!==a?a:""})]},r)})}),M.insights&&M.insights.length>0&&(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("h3",{className:"text-lg font-bold text-center",children:"\uD83D\uDCA1 관계 인사이트"}),(0,l.jsx)("ul",{className:"space-y-2 p-4 bg-bg/50 border border-borderc/50 rounded-lg text-sm",children:M.insights.map((e,s)=>(0,l.jsxs)("li",{className:"flex items-start gap-2",children:[(0,l.jsx)("span",{className:"text-accent",children:"⚡"})," ",e]},s))})]})]})]})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5014)}),_N_E=e.O()}]);