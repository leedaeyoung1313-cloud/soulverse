(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{5014:function(e,t,s){Promise.resolve().then(s.bind(s,8186))},8186:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),l=s(2265);function r(e,t,s,a){let l=Number(e);return Number.isNaN(l)?a:Math.max(t,Math.min(s,l))}let d={compatibility_basic:"기본 궁합 리포트",red_line:"레드 라인 궁합 분석",lucky_color:"행운 컬러 & 무드"};function c(e){var t,s;let{params:c}=e,{topicKey:n}=c,[o,i]=(0,l.useState)(""),[x,m]=(0,l.useState)(""),[u,b]=(0,l.useState)(""),[p,h]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[N,f]=(0,l.useState)(""),[v,y]=(0,l.useState)(""),[w,_]=(0,l.useState)(""),[S,C]=(0,l.useState)(!1),[k,E]=(0,l.useState)(null),[O,M]=(0,l.useState)(null),A=(0,l.useMemo)(()=>{var e;return null!==(e=d[n])&&void 0!==e?e:"궁합 분석"},[n]),I=(0,l.useMemo)(()=>!!(o&&x&&u&&p),[o,x,u,p]);async function P(e){if(e.preventDefault(),I&&!S){C(!0),M(null),E(null);try{let e={topic:n,man_birth:o,woman_birth:x,man_mbti:u.toUpperCase(),woman_mbti:p.toUpperCase(),man_blood:g.trim().toUpperCase()||void 0,woman_blood:N.trim().toUpperCase()||void 0,man_time:v.trim()||void 0,woman_time:w.trim()||void 0},t=await fetch("/api/compat",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("API ".concat(t.status," 오류"));let s=await t.json();if(s.error)throw Error(s.detail||"AI 분석 중 오류 발생");E({...s,score:r(s.score,30,98,80),facets:function(e){let t={정서:80,소통:80,현실:70,성장:90,지속:80};return e?Object.fromEntries(Object.entries(t).map(t=>{let[s,a]=t;return[s,r(e[s],0,100,a)]})):t}(s.facets)})}catch(e){M(e.message||"오류가 발생했습니다.")}finally{C(!1)}}}return(0,a.jsx)("div",{className:"min-h-screen bg-bg text-txt p-4",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto py-8 space-y-6",children:[(0,a.jsxs)("header",{className:"text-center space-y-2",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-muted",children:"SOULVERSE \xb7 COMPAT"}),(0,a.jsx)("h1",{className:"text-3xl font-bold",children:A}),(0,a.jsx)("p",{className:"text-sm text-muted",children:"사주 \xb7 MBTI \xb7 혈액형으로 두 사람의 관계를 분석합니다."})]}),(0,a.jsx)("section",{className:"bg-card border border-borderc rounded-2xl p-6 shadow-deep",children:(0,a.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold",children:"남자"}),(0,a.jsx)("label",{className:"block text-xs text-muted",children:"생년월일"}),(0,a.jsx)("input",{type:"date",value:o,onChange:e=>i(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("label",{className:"block text-xs text-muted",children:"태어난 시간 (선택)"}),(0,a.jsx)("input",{type:"time",value:v,onChange:e=>y(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("label",{className:"block text-xs text-muted",children:"MBTI"}),(0,a.jsx)("input",{type:"text",placeholder:"ENTP",value:u,onChange:e=>b(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm uppercase"}),(0,a.jsx)("label",{className:"block text-xs text-muted",children:"혈액형 (선택)"}),(0,a.jsx)("input",{type:"text",placeholder:"O",value:g,onChange:e=>j(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm uppercase"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold",children:"여자"}),(0,a.jsx)("label",{className:"block text-xs text-muted",children:"생년월일"}),(0,a.jsx)("input",{type:"date",value:x,onChange:e=>m(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("label",{className:"block text-xs text-muted",children:"태어난 시간 (선택)"}),(0,a.jsx)("input",{type:"time",value:w,onChange:e=>_(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("label",{className:"block text-xs text-muted",children:"MBTI"}),(0,a.jsx)("input",{type:"text",placeholder:"ESFP",value:p,onChange:e=>h(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm uppercase"}),(0,a.jsx)("label",{className:"block text-xs text-muted",children:"혈액형 (선택)"}),(0,a.jsx)("input",{type:"text",placeholder:"A",value:N,onChange:e=>f(e.target.value),className:"w-full bg-bg border border-borderc rounded-md px-3 py-2 text-sm uppercase"})]})]}),O&&(0,a.jsx)("p",{className:"text-xs text-red-400",children:O}),(0,a.jsx)("button",{type:"submit",disabled:S||!I,className:"w-full mt-2 bg-accent text-bg font-semibold rounded-xl px-4 py-3 hover:bg-neon transition-all disabled:opacity-50",children:S?"분석 중...":"AI 궁합 리포트 받기"})]})}),k&&!O&&(0,a.jsxs)("section",{className:"bg-card border border-borderc rounded-2xl p-6 shadow-deep space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 flex items-center justify-center border-2 border-accent rounded-full bg-bg shadow-[0_0_25px_rgba(125,211,252,0.4)]",children:(0,a.jsx)("span",{className:"text-2xl font-bold",children:r(k.score,30,98,80)})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-1",children:null!==(t=k.oneliner)&&void 0!==t?t:"함께 성장할 관계입니다."}),(0,a.jsx)("p",{className:"text-sm text-muted",children:null!==(s=k.summary)&&void 0!==s?s:"두 사람의 기질과 현실을 고려해 관계를 조화롭게 만드세요."})]})]}),(0,a.jsx)("div",{className:"h-px bg-borderc/50 my-6"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-center",children:"5가지 관계 분석 요소"}),(0,a.jsx)("p",{className:"text-sm text-muted text-center",children:"정서, 소통, 현실, 성장, 지속성 점수입니다."}),k.facets&&(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(k.facets).map(e=>{var t,s,l;let[r,d]=e;return(0,a.jsxs)("div",{className:"p-3 bg-bg/50 border border-borderc/50 rounded-lg space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:r}),(0,a.jsx)("span",{className:"font-semibold text-accent",children:d})]}),(0,a.jsx)("div",{className:"h-2 w-full bg-borderc/60 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-accent transition-all duration-700",style:{width:"".concat(d,"%")}})}),(null===(t=k.explanation)||void 0===t?void 0:t[r])&&(0,a.jsx)("p",{className:"text-xs text-muted pt-1",children:null!==(l=null===(s=k.explanation)||void 0===s?void 0:s[r])&&void 0!==l?l:""})]},r)})}),k.insights&&k.insights.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-center",children:"\uD83D\uDCA1 관계 인사이트"}),(0,a.jsx)("ul",{className:"space-y-2 p-4 bg-bg/50 border border-borderc/50 rounded-lg text-sm",children:k.insights.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-accent",children:"⚡"})," ",e]},t))})]})]})]})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5014)}),_N_E=e.O()}]);