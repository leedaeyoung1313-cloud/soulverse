(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{5014:function(e,t,s){Promise.resolve().then(s.bind(s,8186))},8186:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),l=s(2265);function n(e,t,s,a){let l=Number(e);return Number.isNaN(l)?a:Math.max(t,Math.min(s,l))}let r={compatibility_basic:"기본 궁합 리포트",red_line:"레드 라인 궁합 분석",lucky_color:"행운 컬러 & 무드"};function i(e){let{params:t}=e,{topicKey:s}=t,[i,c]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[m,x]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[b,p]=(0,l.useState)(""),[f,N]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),[g,y]=(0,l.useState)(""),[_,w]=(0,l.useState)(!1),[S,k]=(0,l.useState)(null),[C,M]=(0,l.useState)(null),E=(0,l.useMemo)(()=>{var e;return null!==(e=r[s])&&void 0!==e?e:"궁합 분석"},[s]),O=(0,l.useMemo)(()=>!!(i&&o&&m&&u),[i,o,m,u]);async function A(e){if(e.preventDefault(),O&&!_){w(!0),M(null),k(null);try{let e={topic:s,man_birth:i,woman_birth:o,man_mbti:m.toUpperCase(),woman_mbti:u.toUpperCase(),man_blood:b.trim().toUpperCase()||void 0,woman_blood:f.trim().toUpperCase()||void 0,man_time:j.trim()||void 0,woman_time:g.trim()||void 0},t=await fetch("/api/compat",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.text().catch(()=>"");throw Error(e||"API ".concat(t.status," 오류가 발생했습니다."))}let a=await t.json();if(a.error)throw Error(a.detail||"AI 분석 중 오류가 발생했습니다.");let l=n(a.score,30,98,80),r=function(e){let t={정서:80,소통:80,현실:70,성장:90,지속:80};return e?{정서:n(e["정서"],0,100,t["정서"]),소통:n(e["소통"],0,100,t["소통"]),현실:n(e["현실"],0,100,t["현실"]),성장:n(e["성장"],0,100,t["성장"]),지속:n(e["지속"],0,100,t["지속"])}:t}(a.facets);k({...a,score:l,facets:r})}catch(e){var t;console.error(e),M(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"알 수 없는 오류가 발생했습니다.")}finally{w(!1)}}}return(0,a.jsx)("div",{className:"min-h-screen bg-bg text-txt p-4",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto py-8 space-y-6",children:[(0,a.jsxs)("header",{className:"space-y-2 text-center",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-muted",children:"SOULVERSE \xb7 COMPAT"}),(0,a.jsx)("h1",{className:"text-3xl font-bold",children:E}),(0,a.jsx)("p",{className:"text-sm text-muted",children:"사주 \xb7 MBTI \xb7 혈액형을 조합해 두 사람의 관계를 현실적으로 분석합니다."})]}),(0,a.jsx)("section",{className:"bg-card border border-borderc rounded-2xl p-6 shadow-deep",children:(0,a.jsx)("form",{onSubmit:A,className:"space-y-6",children:(0,a.jsx)("button",{type:"submit",disabled:_||!O,className:"w-full mt-2 inline-flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-semibold bg-accent text-bg shadow-[0_0_25px_rgba(125,211,252,0.5)] hover:bg-neon hover:shadow-[0_0_40px_rgba(96,165,250,0.7)] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:_?"분석 중...":"AI 궁합 리포트 받기"})})}),S&&!C&&(0,a.jsxs)("section",{className:"bg-card border border-borderc rounded-2xl p-6 shadow-deep space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full border-2 border-accent flex items-center justify-center bg-bg shadow-[0_0_25px_rgba(125,211,252,0.4)]",children:(0,a.jsx)("span",{className:"text-2xl font-bold",children:n(S.score,30,98,80)})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-1",children:S.oneliner||"두 사람의 관계에는 함께 성장할 여지가 충분합니다."}),(0,a.jsx)("p",{className:"text-sm text-muted",children:S.summary||"서로의 기질과 현실적인 상황을 함께 고려해 관계를 안정적으로 만듭니다."})]})]}),(0,a.jsx)("div",{className:"h-px bg-borderc/50 my-6"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-center",children:"5가지 관계 분석 요소"}),(0,a.jsx)("p",{className:"text-sm text-muted text-center -mt-4",children:"정서, 소통, 현실, 성장, 지속 가능성 점수입니다."}),S.facets&&(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(S.facets).map(e=>{var t,s,l;let[n,r]=e;return(0,a.jsxs)("div",{className:"space-y-2 p-3 bg-bg/50 border border-borderc/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-baseline",children:[(0,a.jsx)("span",{className:"font-semibold text-txt",children:n}),(0,a.jsx)("span",{className:"text-lg font-bold text-accent",children:r})]}),(0,a.jsx)("div",{className:"w-full h-3 rounded-full bg-borderc/60 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-accent transition-all duration-700 ease-out",style:{width:"".concat(Math.min(100,Math.max(0,r)),"%")}})}),(null==S?void 0:null===(t=S.explanation)||void 0===t?void 0:t[n])?(0,a.jsx)("p",{className:"text-xs text-muted pt-1",children:null!==(l=null==S?void 0:null===(s=S.explanation)||void 0===s?void 0:s[n])&&void 0!==l?l:""}):null]},n)})}),S.insights&&S.insights.length>0&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-center",children:"\uD83D\uDCA1 관계를 위한 실전 인사이트"}),(0,a.jsx)("ul",{className:"space-y-3 p-4 bg-bg/50 border border-borderc/50 rounded-lg",children:S.insights.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-2 text-sm text-txt",children:[(0,a.jsx)("span",{className:"text-accent flex-shrink-0 mt-0.5",children:"⚡"}),e]},t))})]})]})]})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5014)}),_N_E=e.O()}]);